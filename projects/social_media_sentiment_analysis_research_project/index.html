<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="WB7A_xUUe6qutbsaCFuUDljb7-aiJNpIhzosq9n52gI"> <meta name="msvalidate.01" content="9840050BC32E661645C019601C266AA5"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Social Media Sentiment Analysis Research | Meng Xu</title> <meta name="author" content="Meng Xu"> <meta name="description" content="Meng Xu's Personal Website"> <meta name="keywords" content="phd, professor, research, academic, business, management, uga, the university of georgia, georgia tech, georgia institute of technology"> <script type="application/ld+json">
    {
        "author":
        {
            "@type": "Person",
            "name": "Meng Xu"
        },
        "url": "https://mengxu-readme.github.io/projects/social_media_sentiment_analysis_research_project/",
        "@type": "Website",
        "description": "Meng Xu's Personal Website",
        "headline": "Social Media Sentiment Analysis Research",
        "sameAs": ["https://www.linkedin.com/in/mxu"],
        "name": "Meng Xu",
        "@context": "https://schema.org"
    }
    </script> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link href="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.css" rel="stylesheet"> <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico?"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://mengxu-readme.github.io/projects/social_media_sentiment_analysis_research_project/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Meng</span> Xu</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/research/">Research</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change Theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Social Media Sentiment Analysis Research</h1> <h2 class="post-description"></h2> </header> <article> <hr style="margin-top: 3rem"> <h3 id="introduction">Introduction</h3> <p>The general purpose of this project was to analyze the sentiment for iPhone 8, iPhone X, and iPhone 11 releases using various media outlets such as news, press, and tech articles as well as general consumer responses via Twitter and seeing if or how that sentiment relates to or is reflected in Apple’s stock price. The iPhone 8 was released on September 22, 2017; the iPhone X was released on November 3, 2017; and the iPhone 11 was released on September 20, 2019.</p> <p>I wanted to see how people were talking about iPhone products on Twitter, what major news sources reported about new iPhone releases, and how the stock performed before and after each release. I ran a regression analysis with the data I collected to identify factors that affected AAPL stock performance. With the model I created, people will be able to predict AAPL stock returns based on consumer sentiment. Apple can increase its stock returns by being more engaged with general consumers on social media platforms before and after each new iPhone release.</p> <h3 id="data">Data</h3> <p style="margin-bottom: 0.5rem;">There were four major sources of data:</p> <ul> <li>Google Trends: <p style="margin-top: 0.5rem;">I wanted to see how the popularity of iPhone changed through out the year and how it correlated with each new phone release. I was able to manually download the data from Google.</p> </li> <li> Social Media – Twitter: <p style="margin-top: 0.5rem;">I created 3 Twitter API accounts with Sandbox Subscription to pull 500 tweets per day, three days before the release (which was counted as the “before” group) and the release date plus two days after each release (which counted as the “after” group), for a total of 6 days’ worth of Twitter data for each iPhone release. 500 * 6 * 3 = 9000 tweets in total.</p> <figure class="highlight"><pre><code class="language-py" data-lang="py"><span class="kn">from</span> <span class="n">searchtweets</span> <span class="kn">import</span> <span class="n">load_credentials</span><span class="p">,</span> <span class="n">gen_rule_payload</span><span class="p">,</span> <span class="n">collect_results</span>

<span class="n">search_args</span> <span class="o">=</span> <span class="nf">load_credentials</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="sh">'</span><span class="s">./twitter_keys.yaml</span><span class="sh">'</span><span class="p">,</span> <span class="n">yaml_key</span><span class="o">=</span><span class="sh">'</span><span class="s">search_tweets_api</span><span class="sh">'</span><span class="p">,</span> <span class="n">env_overwrite</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="n">rule</span> <span class="o">=</span> <span class="nf">gen_rule_payload</span><span class="p">(</span><span class="sh">'</span><span class="s">iphone 11 lang:en</span><span class="sh">'</span><span class="p">,</span> <span class="n">results_per_call</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">from_date</span><span class="o">=</span><span class="sh">'</span><span class="s">201909220800</span><span class="sh">'</span><span class="p">,</span> <span class="n">to_date</span><span class="o">=</span><span class="sh">'</span><span class="s">201909222200</span><span class="sh">'</span><span class="p">)</span>

<span class="n">tweets</span> <span class="o">=</span> <span class="nf">collect_results</span><span class="p">(</span><span class="n">rule</span><span class="p">,</span> <span class="n">max_results</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">result_stream_args</span><span class="o">=</span><span class="n">search_args</span><span class="p">)</span>

<span class="p">[</span><span class="nf">print</span><span class="p">(</span><span class="n">tweet</span><span class="p">.</span><span class="n">all_text</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="sh">'</span><span class="se">\n\n</span><span class="sh">'</span><span class="p">)</span> <span class="k">for</span> <span class="n">tweet</span> <span class="ow">in</span> <span class="n">tweets</span><span class="p">[:]]</span></code></pre></figure> <div class="caption"> Search Tweets Code Snippet </div> </li> <li>Stock Information: <p style="margin-top: 0.5rem;">The stock information for iPhone 8 and iPhone X that was released in 2017 came from WRDS. As 2019 stock information was not yet available via WRDS, for the iPhone 11, the data was collected from Yahoo Finance. I used (AAPL Return – SP500 Market Index Return) to calculate Adjusted Returns for AAPL. Date_idx shows the index of the dates with 0 being the release date.</p> <div class="table-responsive"> <table class="table table-sm"> <thead> <tr> <th style="text-align: left">Phone</th> <th style="text-align: right">Date_idx</th> <th style="text-align: right">AAPL</th> <th style="text-align: right">SP500</th> <th style="text-align: right">Adj_Return</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">iPhone8</td> <td style="text-align: right">-3</td> <td style="text-align: right">0.000378</td> <td style="text-align: right">0.00111</td> <td style="text-align: right">-0.000732</td> </tr> <tr> <td style="text-align: left">iPhone8</td> <td style="text-align: right">-2</td> <td style="text-align: right">-0.01676</td> <td style="text-align: right">0.000634</td> <td style="text-align: right">-0.017392</td> </tr> <tr> <td style="text-align: left">iPhone8</td> <td style="text-align: right">-1</td> <td style="text-align: right">-0.01717</td> <td style="text-align: right">-0.00305</td> <td style="text-align: right">-0.014126</td> </tr> <tr> <td style="text-align: left">iPhone8</td> <td style="text-align: right">0</td> <td style="text-align: right">-0.00978</td> <td style="text-align: right">0.000648</td> <td style="text-align: right">-0.010427</td> </tr> <tr> <td style="text-align: left">iPhone8</td> <td style="text-align: right">1</td> <td style="text-align: right">-0.00882</td> <td style="text-align: right">-0.00222</td> <td style="text-align: right">-0.0066</td> </tr> <tr> <td style="text-align: left">iPhone8</td> <td style="text-align: right">2</td> <td style="text-align: right">0.017204</td> <td style="text-align: right">0.000072</td> <td style="text-align: right">0.017132</td> </tr> </tbody> </table> </div> <div class="caption"> Stock Information </div> </li> <li> News Articles <ul> <li>Apple.com Newsroom: 7 articles</li> <li>TechCrunch: 11 articles</li> <li>Wall Street Journal: 31 articles</li> </ul> <p style="margin-top: 0.75rem;">I grouped the articles into three folders: Apple (Apple Newsroom), TC (TechCrunch), and WSJ (Wall Street Journal). I then looped through each txt file in each folder to read all articles as a large string to store in a DataFrame so I could calculate sentiment score for each news source.</p> </li> </ul> <h3 id="analysis">Analysis</h3> <p>Knowing that I was going to repeat some steps many times, I defined functions to simplify the analysis.</p> <p>I started by visually exploring the data and making plots.</p> <p>Google trends data showed that the popularity of “iPhone” searches dramatically started to increase about 2 weeks prior to each release date. I used this data to narrow down the scope and set the timeframes for how far back I needed to go to find articles prior to each release date.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/google_trends-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/google_trends-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/google_trends-1400.webp"></source> <img src="/assets/img/projects/google_trends.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Google Trends" title="Google Trends" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Google Trends</figcaption> </figure> <p>AAPL stock performance was quite different for each new phone release. In the graphs below, the axis goes up to 3 days prior to and 2 days subsequent to each release date (0). The line graph shows that AAPL stock experienced some increase after the releases of iPhone 8 and iPhone 11, while it dropped after the release of iPhone X.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/stock_performance-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/stock_performance-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/stock_performance-1400.webp"></source> <img src="/assets/img/projects/stock_performance.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Stock Performance" title="Stock Performance" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Stock Performance</figcaption> </figure> <p>A closer look at the average performance of AAPL stock returns told a different story. The blue bars represent the 3-day average adjusted stock returns for each iPhone before release, and orange bars represent the 3-day average adjusted stock returns for each iPhone after release. The stock return increased the most for iPhone 8, changing from negative to positive return, and it also performed well for iPhone X. However, the adjusted stock return dropped significantly after the release of iPhone 11. This graph made me think that iPhone 11 might not be a successful iPhone release.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/average_stock_performance-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/average_stock_performance-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/average_stock_performance-1400.webp"></source> <img src="/assets/img/projects/average_stock_performance.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Average Stock Performance" title="Average Stock Performance" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Average Stock Performance</figcaption> </figure> <p>I grouped the articles into three folders: Apple, TechCrunch, and WSJ. The articles tend to mention multiple iPhone products together, so it was difficult to attribute each article to only one phone. Also, due to my desire to evaluate the sentiment of the press and marketing leading up to each release date, in addition to the major decline in the publishing of Apple and iPhone related articles after each release, I decided not to split the articles into 6 separate groups as I did for tweets. I looped through each txt file in each folder to read all articles as a large string.</p> <p>With the <b>Inquirer Dictionary</b>, I calculated sentiment score <b>net_pos_pct</b> for each news source. I did not use LM Financial Dictionary for WSJ articles because I wanted to compare sentiment scores for each news source, and I thought it would be better and more consistent to use the same dictionary to do so. The variable <b>net_pos_pct</b> is net positive percentage, which is calculated using <b>(Positive words – Negative words) / Total words</b>.</p> <p>News reports generally relayed positive sentiment about iPhones, with Apple being the most positive about its own products. I defined a function to generate word clouds that allowed me to add weights to words based on the frequency of their appearances and show them in different sizes based on the weights to better visualize the content of the articles and tweets. By looking at the top words for each news source, it is clear that news sources emphasized different aspects of iPhones, reflecting each news source’s area of expertise. <b>Apple</b> mainly used words such as camera, photo, video (because new or updated camera was the key new feature) and store, customer, available, etc. <b>TechCrunch</b> frequently used tech words such as biometrics, screen, security, device, sensor, etc. <b>WSJ</b> liked to use words such as revenue, sales, share, and investor.</p> <p>Sentiment score for each Apple Newsroom, TechCrunch, and WSJ:</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/sentiment_score-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/sentiment_score-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/sentiment_score-1400.webp"></source> <img src="/assets/img/projects/sentiment_score.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Sentiment Score" title="Sentiment Score" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Sentiment Score</figcaption> </figure> <p>Top words - Apple Newsroom</p> <div style="margin-left: auto; margin-right: auto; width: 65%;"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/apple_newsroom_top_words-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/apple_newsroom_top_words-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/apple_newsroom_top_words-1400.webp"></source> <img src="/assets/img/projects/apple_newsroom_top_words.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Apple Newsroom Top Words" title="Apple Newsroom Top Words" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Apple Newsroom Top Words</figcaption> </figure> </div> <p>Top words - TechCrunch</p> <div style="margin-left: auto; margin-right: auto; width: 65%;"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/techcrunch_top_words-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/techcrunch_top_words-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/techcrunch_top_words-1400.webp"></source> <img src="/assets/img/projects/techcrunch_top_words.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="TechCrunch Top Words" title="TechCrunch Top Words" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">TechCrunch Top Words</figcaption> </figure> </div> <p>Top words - Wall Street Journal</p> <div style="margin-left: auto; margin-right: auto; width: 65%;"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/wsj_top_words-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/wsj_top_words-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/wsj_top_words-1400.webp"></source> <img src="/assets/img/projects/wsj_top_words.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Wall Street Journal Top Words" title="Wall Street Journal Top Words" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Wall Street Journal Top Words</figcaption> </figure> </div> <p>I set the tweets into 6 groups: iPhone 8 pre, iPhone 8 post, iPhone x pre, iPhone x post, iPhone 11 pre, iPhone 11 post, and then applied <b>groupby(Phone).mean()</b> to get the mean <b>net positive percentage</b> for each group. I then mapped <b>net positive percentage</b> values to the stock performance file.</p> <div class="table-responsive"> <table class="table table-sm"> <thead> <tr> <th style="text-align: left"></th> <th style="text-align: right">Phone</th> <th style="text-align: right">pre_post</th> <th style="text-align: right">Adj_Return</th> <th style="text-align: right">net_pos_pct</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">0</td> <td style="text-align: right">iPhone11</td> <td style="text-align: right">0</td> <td style="text-align: right">0.00082184</td> <td style="text-align: right">3.82E-06</td> </tr> <tr> <td style="text-align: left">1</td> <td style="text-align: right">iPhone11</td> <td style="text-align: right">1</td> <td style="text-align: right">-0.006033761</td> <td style="text-align: right">4.39E-06</td> </tr> <tr> <td style="text-align: left">2</td> <td style="text-align: right">iPhone8</td> <td style="text-align: right">0</td> <td style="text-align: right">-0.01075</td> <td style="text-align: right">1.08E-06</td> </tr> <tr> <td style="text-align: left">3</td> <td style="text-align: right">iPhone8</td> <td style="text-align: right">1</td> <td style="text-align: right">3.50E-05</td> <td style="text-align: right">2.05E-06</td> </tr> <tr> <td style="text-align: left">4</td> <td style="text-align: right">iPhoneX</td> <td style="text-align: right">0</td> <td style="text-align: right">0.001926667</td> <td style="text-align: right">1.82E-06</td> </tr> <tr> <td style="text-align: left">5</td> <td style="text-align: right">iPhoneX</td> <td style="text-align: right">1</td> <td style="text-align: right">0.011764667</td> <td style="text-align: right">4.08E-06</td> </tr> </tbody> </table> </div> <div class="caption"> Stock Performance &amp; iPhone Pre-Post Release Net Positive Percentage </div> <p>Consumers in general became more positive after a new phone was released than they were before the release, but that jump was much smaller for iPhone 11 than for the iPhone 8 or iPhone X models.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/iphone_pre_post_npp-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/iphone_pre_post_npp-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/iphone_pre_post_npp-1400.webp"></source> <img src="/assets/img/projects/iphone_pre_post_npp.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="iPhone Pre-Post Release Net Positive Percentage" title="iPhone Pre-Post Release Net Positive Percentage" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">iPhone Pre-Post Release Net Positive Percentage</figcaption> </figure> <p>Top words that people used in their tweets, filtering out stop words.</p> <div style="margin-left: auto; margin-right: auto; width: 65%;"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/twitter_top_words-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/twitter_top_words-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/twitter_top_words-1400.webp"></source> <img src="/assets/img/projects/twitter_top_words.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Twitter Top Words" title="Twitter Top Words" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Twitter Top Words</figcaption> </figure> </div> <p>I used <b>get_dummies</b> to create three dummies, iPhone 8, iPhone x, and iPhone 11, dropping iPhone 11 which would be used as the “baseline” because only N-1 dummy variables were needed.</p> <div class="table-responsive"> <table class="table table-sm"> <thead> <tr> <th style="text-align: left"></th> <th style="text-align: right">Phone</th> <th style="text-align: right">pre_post</th> <th style="text-align: right">Adj_Return</th> <th style="text-align: right">net_pos_pct</th> <th style="text-align: right">iPhone11</th> <th style="text-align: right">iPhone8</th> <th style="text-align: right">iPhoneX</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">0</td> <td style="text-align: right">iPhone11</td> <td style="text-align: right">0</td> <td style="text-align: right">0.00082184</td> <td style="text-align: right">3.82E-06</td> <td style="text-align: right">1</td> <td style="text-align: right">0</td> <td style="text-align: right">0</td> </tr> <tr> <td style="text-align: left">1</td> <td style="text-align: right">iPhone11</td> <td style="text-align: right">1</td> <td style="text-align: right">-0.006033761</td> <td style="text-align: right">4.39E-06</td> <td style="text-align: right">1</td> <td style="text-align: right">0</td> <td style="text-align: right">0</td> </tr> <tr> <td style="text-align: left">2</td> <td style="text-align: right">iPhone8</td> <td style="text-align: right">0</td> <td style="text-align: right">-0.01075</td> <td style="text-align: right">1.08E-06</td> <td style="text-align: right">0</td> <td style="text-align: right">1</td> <td style="text-align: right">0</td> </tr> <tr> <td style="text-align: left">3</td> <td style="text-align: right">iPhone8</td> <td style="text-align: right">1</td> <td style="text-align: right">3.50E-05</td> <td style="text-align: right">2.05E-06</td> <td style="text-align: right">0</td> <td style="text-align: right">1</td> <td style="text-align: right">0</td> </tr> <tr> <td style="text-align: left">4</td> <td style="text-align: right">iPhoneX</td> <td style="text-align: right">0</td> <td style="text-align: right">0.001926667</td> <td style="text-align: right">1.82E-06</td> <td style="text-align: right">0</td> <td style="text-align: right">0</td> <td style="text-align: right">1</td> </tr> <tr> <td style="text-align: left">5</td> <td style="text-align: right">iPhoneX</td> <td style="text-align: right">1</td> <td style="text-align: right">0.011764667</td> <td style="text-align: right">4.08E-06</td> <td style="text-align: right">0</td> <td style="text-align: right">0</td> <td style="text-align: right">1</td> </tr> </tbody> </table> </div> <div class="caption"> Stock Performance &amp; iPhone Pre-Post Release Net Positive Percentage Dummy </div> <p>I ran a regression analysis using this DataFrame. The p-values for the independent variables are all significant, except that for <b>pre_post</b>. The negative coefficient of <b>pre_post</b> shows that AAPL stock generally does worse after new phone releases than before the release (but it’s not significant). <b>pre_post</b> has a larger p-value and is not a good indicator. This is likely due to different stock performance before and after release for each iPhone and limited data (only 6 observations). The variable <b>net_pos_pct</b> is a very small number and that is why it has a large coefficient. Since iPhone 11 was dropped and used as the baseline, the coefficients for iPhone 8 and iPhone X signify that, compared to <b>iPhone 11</b>, <b>iPhone 8</b> and <b>iPhone X</b> had a more positive affect on AAPL stock returns. I may conclude that iPhone 8 and iPhone X were more successful iPhone models than the iPhone 11 was, partly due to a successful marketing strategy that helped to produce more positive sentiment.</p> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/projects/regression_analysis-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/projects/regression_analysis-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/projects/regression_analysis-1400.webp"></source> <img src="/assets/img/projects/regression_analysis.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" alt="Regression Analysis" title="Regression Analysis" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture><figcaption class="caption">Regression Analysis</figcaption> </figure> <figure class="highlight"><pre><code class="language-py" data-lang="py"><span class="kn">import</span> <span class="n">re</span><span class="p">,</span> <span class="n">os</span><span class="p">,</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">from</span> <span class="n">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>
<span class="kn">from</span> <span class="n">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="n">linearmodels</span> <span class="kn">import</span> <span class="n">OLS</span>
<span class="kn">import</span> <span class="n">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">from</span> <span class="n">sklearn.feature_extraction</span> <span class="kn">import</span> <span class="n">text</span>

<span class="c1"># define constant variables
</span><span class="n">iphone8_tweets_pre_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphone8_tweets_pre_release</span><span class="sh">'</span>
<span class="n">iphone8_tweets_post_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphone8_tweets_post_release</span><span class="sh">'</span>
<span class="n">iphonex_tweets_pre_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphonex_tweets_pre_release</span><span class="sh">'</span>
<span class="n">iphonex_tweets_post_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphonex_tweets_post_release</span><span class="sh">'</span>
<span class="n">iphone11_tweets_pre_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphone11_tweets_pre_release</span><span class="sh">'</span>
<span class="n">iphone11_tweets_post_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphone11_tweets_post_release</span><span class="sh">'</span>
<span class="n">iphone_tweets_pre_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphone_tweets_pre_release</span><span class="sh">'</span>
<span class="n">iphone_tweets_post_release_folder</span> <span class="o">=</span> <span class="sh">'</span><span class="s">iphone_tweets_post_release</span><span class="sh">'</span>
<span class="n">apple_articles</span> <span class="o">=</span> <span class="sh">'</span><span class="s">apple_articles</span><span class="sh">'</span>
<span class="n">tc_articles</span> <span class="o">=</span> <span class="sh">'</span><span class="s">tc_articles</span><span class="sh">'</span>
<span class="n">wsj_articles</span> <span class="o">=</span> <span class="sh">'</span><span class="s">wsj_articles</span><span class="sh">'</span>

<span class="c1"># define global variables
</span><span class="n">inqdict</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">inqpos</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">inqneg</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">dtmd</span> <span class="o">=</span> <span class="bp">None</span>
<span class="n">voc</span> <span class="o">=</span> <span class="bp">None</span>


<span class="c1"># initialize global variables inqdic, inqpos, and inqneg
</span><span class="k">def</span> <span class="nf">initialize</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">inqdict</span>
    <span class="n">inqdict</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_excel</span><span class="p">(</span><span class="sh">'</span><span class="s">inquirerbasic.xls</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">global</span> <span class="n">inqpos</span>
    <span class="n">inqpos</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">#\d+</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">,</span> <span class="n">w</span><span class="p">.</span><span class="nf">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">inqdict</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">inqdict</span><span class="p">[</span><span class="sh">'</span><span class="s">Positiv</span><span class="sh">'</span><span class="p">].</span><span class="nf">notnull</span><span class="p">(),</span> <span class="sh">'</span><span class="s">Entry</span><span class="sh">'</span><span class="p">])</span>
    <span class="k">global</span> <span class="n">inqneg</span>
    <span class="n">inqneg</span> <span class="o">=</span> <span class="nf">set</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">#\d+</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">,</span> <span class="nf">str</span><span class="p">(</span><span class="n">w</span><span class="p">).</span><span class="nf">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">inqdict</span><span class="p">.</span><span class="n">loc</span><span class="p">[</span><span class="n">inqdict</span><span class="p">[</span><span class="sh">'</span><span class="s">Negativ</span><span class="sh">'</span><span class="p">].</span><span class="nf">notnull</span><span class="p">(),</span> <span class="sh">'</span><span class="s">Entry</span><span class="sh">'</span><span class="p">])</span>


<span class="c1"># read all files in one folder as a str
</span><span class="k">def</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="sh">''</span>
    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="nf">listdir</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
        <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">folder</span> <span class="o">+</span> <span class="sh">'</span><span class="s">/</span><span class="sh">'</span> <span class="o">+</span> <span class="n">f</span><span class="p">,</span> <span class="sh">'</span><span class="s">r</span><span class="sh">'</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">)</span> <span class="k">as</span> <span class="n">t</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">+=</span> <span class="n">t</span><span class="p">.</span><span class="nf">read</span><span class="p">()</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span>
    <span class="k">return</span> <span class="n">content</span>


<span class="c1"># create document term matrix
</span><span class="k">def</span> <span class="nf">document_term_matrix</span><span class="p">(</span><span class="n">content</span><span class="p">):</span>
    <span class="n">vec</span> <span class="o">=</span> <span class="nc">CountVectorizer</span><span class="p">(</span><span class="n">max_features</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span> <span class="n">stop_words</span><span class="o">=</span><span class="sh">'</span><span class="s">english</span><span class="sh">'</span><span class="p">,</span> <span class="n">ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">global</span> <span class="n">dtmd</span>
    <span class="n">dtmd</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">vec</span><span class="p">.</span><span class="nf">fit_transform</span><span class="p">([</span><span class="n">content</span><span class="p">]).</span><span class="nf">todense</span><span class="p">())</span>

    <span class="k">global</span> <span class="n">voc</span>
    <span class="n">voc</span> <span class="o">=</span> <span class="p">{</span><span class="n">v</span><span class="p">:</span> <span class="n">k</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vec</span><span class="p">.</span><span class="n">vocabulary_</span><span class="p">.</span><span class="nf">items</span><span class="p">()}</span>


<span class="c1"># find top words
</span><span class="k">def</span> <span class="nf">top_words</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">word_counts</span> <span class="o">=</span> <span class="n">dtmd</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">word_counts</span><span class="p">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">word_counts</span><span class="p">.</span><span class="n">index</span><span class="p">.</span><span class="nf">map</span><span class="p">(</span><span class="n">voc</span><span class="p">)</span>
    <span class="n">word_counts</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">top</span> <span class="o">=</span> <span class="n">word_counts</span><span class="p">.</span><span class="nf">nlargest</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
    <span class="n">top</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>


<span class="c1"># generate word cloud for most frequently appeared words
</span><span class="k">def</span> <span class="nf">word_cloud_show</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">stop_words</span><span class="p">):</span>
    <span class="n">word_cloud</span> <span class="o">=</span> <span class="nc">WordCloud</span><span class="p">(</span><span class="n">background_color</span><span class="o">=</span><span class="sh">'</span><span class="s">white</span><span class="sh">'</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">max_words</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">collocations</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">stopwords</span><span class="o">=</span><span class="n">stop_words</span><span class="p">).</span><span class="nf">generate</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">imshow</span><span class="p">(</span><span class="n">word_cloud</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">axis</span><span class="p">(</span><span class="sh">'</span><span class="s">off</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>


<span class="c1"># calculate positive and negative tones
</span><span class="k">def</span> <span class="nf">inq_dict</span><span class="p">():</span>
    <span class="n">iphone_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">()</span>
    <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">word_count</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtmd</span><span class="p">.</span><span class="nf">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">).</span><span class="n">values</span>
    <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">positive_inq</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtmd</span><span class="p">[[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">dtmd</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">voc</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="ow">in</span> <span class="n">inqpos</span><span class="p">]].</span><span class="nf">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">).</span><span class="n">values</span> <span class="o">/</span> <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">word_count</span><span class="sh">'</span><span class="p">].</span><span class="n">values</span>
    <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">negative_inq</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">dtmd</span><span class="p">[[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">dtmd</span><span class="p">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">voc</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="ow">in</span> <span class="n">inqneg</span><span class="p">]].</span><span class="nf">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">).</span><span class="n">values</span> <span class="o">/</span> <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">word_count</span><span class="sh">'</span><span class="p">].</span><span class="n">values</span>

    <span class="nf">print</span><span class="p">(</span><span class="n">iphone_df</span><span class="p">[[</span><span class="sh">'</span><span class="s">positive_inq</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">negative_inq</span><span class="sh">'</span><span class="p">]].</span><span class="nf">describe</span><span class="p">().</span><span class="nf">transpose</span><span class="p">())</span>

    <span class="nf">return </span><span class="p">((</span><span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">positive_inq</span><span class="sh">'</span><span class="p">]</span> <span class="o">-</span> <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">negative_inq</span><span class="sh">'</span><span class="p">])</span> <span class="o">/</span> <span class="n">iphone_df</span><span class="p">[</span><span class="sh">'</span><span class="s">word_count</span><span class="sh">'</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>


<span class="c1"># sentiment analysis by calculating net positive percentage
</span><span class="k">def</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">folder</span><span class="p">):</span>
    <span class="n">content</span> <span class="o">=</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
    <span class="nf">document_term_matrix</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
    <span class="nf">top_words</span><span class="p">(</span><span class="n">folder</span> <span class="o">+</span> <span class="sh">'</span><span class="s">_top.csv</span><span class="sh">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">inq_dict</span><span class="p">()</span>


<span class="nf">initialize</span><span class="p">()</span>

<span class="c1"># plot Google Trends
</span><span class="n">trends</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">google_trends.csv</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="sh">'</span><span class="s">Week</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Popularity</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">trends</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">xlabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Week</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Iphone Search Popularity</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># NEWS ARTICLES
# new articles sentiment analysis
</span><span class="n">apple_sentiment</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">apple_articles</span><span class="p">)</span>
<span class="n">tc_sentiment</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">tc_articles</span><span class="p">)</span>
<span class="n">wsj_sentiment</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">wsj_articles</span><span class="p">)</span>
<span class="n">articles_df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">([[</span><span class="sh">'</span><span class="s">Apple Newsroom</span><span class="sh">'</span><span class="p">,</span> <span class="n">apple_sentiment</span><span class="p">],</span> <span class="p">[</span><span class="sh">'</span><span class="s">TechCrunch</span><span class="sh">'</span><span class="p">,</span> <span class="n">tc_sentiment</span><span class="p">],</span> <span class="p">[</span><span class="sh">'</span><span class="s">Wall Street Journal</span><span class="sh">'</span><span class="p">,</span> <span class="n">wsj_sentiment</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">News Source</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Sentiment Score</span><span class="sh">'</span><span class="p">])</span>

<span class="c1"># plot sentiment scores for each news source
</span><span class="n">sns</span><span class="p">.</span><span class="nf">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">News Source</span><span class="sh">'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">Sentiment Score</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">articles_df</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># generate word clouds for each news source
</span><span class="n">articles_stops</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">ENGLISH_STOP_WORDS</span><span class="p">.</span><span class="nf">union</span><span class="p">(</span>
<span class="p">[</span><span class="sh">'</span><span class="s">8</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">X</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">x</span><span class="sh">'</span> <span class="sh">'</span><span class="s">11</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">iphone</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">apple</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Apple</span><span class="sh">'</span><span class="p">])</span>

<span class="n">apple_articles_content</span> <span class="o">=</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">apple_articles</span><span class="p">)</span>
<span class="nf">word_cloud_show</span><span class="p">(</span><span class="n">apple_articles_content</span><span class="p">,</span> <span class="n">articles_stops</span><span class="p">)</span>

<span class="n">tc_articles_content</span> <span class="o">=</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">tc_articles</span><span class="p">)</span>
<span class="nf">word_cloud_show</span><span class="p">(</span><span class="n">tc_articles_content</span><span class="p">,</span> <span class="n">articles_stops</span><span class="p">)</span>

<span class="n">wsj_articles_content</span> <span class="o">=</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">wsj_articles</span><span class="p">)</span>
<span class="nf">word_cloud_show</span><span class="p">(</span><span class="n">wsj_articles_content</span><span class="p">,</span> <span class="n">articles_stops</span><span class="p">)</span>

<span class="c1"># TWEETS
# generate word cloud for all tweets
</span><span class="n">iphone_tweets_content</span> <span class="o">=</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">iphone_tweets_pre_release_folder</span><span class="p">)</span> <span class="o">+</span> <span class="sh">'</span><span class="se">\n</span><span class="sh">'</span> <span class="o">+</span> <span class="nf">read_files</span><span class="p">(</span><span class="n">iphone_tweets_pre_release_folder</span><span class="p">)</span>
<span class="n">tweets_stops</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="n">ENGLISH_STOP_WORDS</span><span class="p">.</span><span class="nf">union</span><span class="p">([</span><span class="sh">'</span><span class="s">8</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">X</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">x</span><span class="sh">'</span> <span class="sh">'</span><span class="s">11</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">https</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">iphone</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">apple</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Apple</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">co</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">fuck</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Fuck</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">pussy</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">IWCNDoXYNG</span><span class="sh">'</span><span class="p">])</span>
<span class="nf">word_cloud_show</span><span class="p">(</span><span class="n">iphone_tweets_content</span><span class="p">,</span> <span class="n">tweets_stops</span><span class="p">)</span>

<span class="c1"># net positive sentiment analysis for each phone before and after release
</span><span class="n">net_pos_pct_iphone8_pre_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphone8_tweets_pre_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphone8_post_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphone8_tweets_post_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphonex_pre_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphonex_tweets_pre_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphonex_post_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphonex_tweets_post_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphone11_pre_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphone11_tweets_pre_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphone11_post_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphone11_tweets_post_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphone_pre_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphone_tweets_pre_release_folder</span><span class="p">)</span>
<span class="n">net_pos_pct_iphone_post_release</span> <span class="o">=</span> <span class="nf">sentiment_analysis</span><span class="p">(</span><span class="n">iphone_tweets_post_release_folder</span><span class="p">)</span>

<span class="c1"># get stocks
</span><span class="n">stock</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">read_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">stock_info.csv</span><span class="sh">'</span><span class="p">)</span>
<span class="n">stock</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">stock</span><span class="p">[</span><span class="sh">'</span><span class="s">Date_idx</span><span class="sh">'</span><span class="p">].</span><span class="nf">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># plot stock performance for each phone - subplot
</span><span class="n">iphone8</span> <span class="o">=</span> <span class="n">stock</span><span class="p">[</span><span class="n">stock</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphone8</span><span class="sh">'</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">iphone8</span><span class="p">[</span><span class="sh">'</span><span class="s">Date_idx</span><span class="sh">'</span><span class="p">],</span> <span class="n">iphone8</span><span class="p">[</span><span class="sh">'</span><span class="s">Adj_Return</span><span class="sh">'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">blue</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Iphone 8</span><span class="sh">'</span><span class="p">)</span>

<span class="n">iphonex</span> <span class="o">=</span> <span class="n">stock</span><span class="p">[</span><span class="n">stock</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphonex</span><span class="sh">'</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">iphonex</span><span class="p">[</span><span class="sh">'</span><span class="s">Date_idx</span><span class="sh">'</span><span class="p">],</span> <span class="n">iphonex</span><span class="p">[</span><span class="sh">'</span><span class="s">Adj_Return</span><span class="sh">'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">red</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Iphone x</span><span class="sh">'</span><span class="p">)</span>

<span class="n">iphone11</span> <span class="o">=</span> <span class="n">stock</span><span class="p">[</span><span class="n">stock</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphone11</span><span class="sh">'</span><span class="p">]</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">plot</span><span class="p">(</span><span class="n">iphone11</span><span class="p">[</span><span class="sh">'</span><span class="s">Date_idx</span><span class="sh">'</span><span class="p">],</span> <span class="n">iphone11</span><span class="p">[</span><span class="sh">'</span><span class="s">Adj_Return</span><span class="sh">'</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">black</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">title</span><span class="p">(</span><span class="sh">'</span><span class="s">Iphone 11</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># plot stock performance for each phone - lineplot
</span><span class="n">sns</span><span class="p">.</span><span class="nf">lineplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">Date_idx</span><span class="sh">'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">Adj_Return</span><span class="sh">'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">stock</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># plot average adjusted return for each iphone before and after release
</span><span class="n">sns</span><span class="p">.</span><span class="nf">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">Adj_Return</span><span class="sh">'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">stock</span><span class="p">,</span> <span class="n">ci</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Iphone8</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Iphonex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Iphone11</span><span class="sh">'</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">ylabel</span><span class="p">(</span><span class="sh">'</span><span class="s">Adjusted Return</span><span class="sh">'</span><span class="p">)</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># map net_pos_pct to stock performance
</span><span class="n">returns</span> <span class="o">=</span> <span class="n">stock</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">])[</span><span class="sh">'</span><span class="s">Adj_Return</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">()</span>
<span class="n">returns</span><span class="p">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphone8</span><span class="sh">'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span> <span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_pos_pct_iphone8_pre_release</span>
<span class="n">returns</span><span class="p">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphone8</span><span class="sh">'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">),</span> <span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_pos_pct_iphone8_post_release</span>
<span class="n">returns</span><span class="p">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphonex</span><span class="sh">'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span> <span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_pos_pct_iphonex_pre_release</span>
<span class="n">returns</span><span class="p">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphonex</span><span class="sh">'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">),</span> <span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_pos_pct_iphonex_post_release</span>
<span class="n">returns</span><span class="p">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphone11</span><span class="sh">'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">),</span> <span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_pos_pct_iphone11_pre_release</span>
<span class="n">returns</span><span class="p">.</span><span class="n">loc</span><span class="p">[(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="sh">'</span><span class="s">Iphone11</span><span class="sh">'</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">),</span> <span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">net_pos_pct_iphone11_post_release</span>
<span class="n">returns</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">returns_with_sentiment.csv</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># plot net positive sentiment before and after release for each phone
</span><span class="n">sns</span><span class="p">.</span><span class="nf">barplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">net_pos_pct</span><span class="sh">'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="sh">'</span><span class="s">pre_post</span><span class="sh">'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">returns</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Iphone8</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Iphonex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Iphone11</span><span class="sh">'</span><span class="p">])</span>
<span class="n">plt</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

<span class="c1"># regression analysis for stock performance prediction
</span><span class="n">returns_model</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">concat</span><span class="p">([</span><span class="n">returns</span><span class="p">,</span> <span class="n">pd</span><span class="p">.</span><span class="nf">get_dummies</span><span class="p">(</span><span class="n">returns</span><span class="p">[</span><span class="sh">'</span><span class="s">Phone</span><span class="sh">'</span><span class="p">])],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">returns_model</span><span class="p">.</span><span class="nf">to_csv</span><span class="p">(</span><span class="sh">'</span><span class="s">returns_model.csv</span><span class="sh">'</span><span class="p">)</span>
<span class="n">form</span> <span class="o">=</span> <span class="sh">'</span><span class="s">Adj_Return ~ pre_post + net_pos_pct + Iphone8 + Iphonex</span><span class="sh">'</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">OLS</span><span class="p">.</span><span class="nf">from_formula</span><span class="p">(</span><span class="n">form</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">returns_model</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">model</span><span class="p">.</span><span class="nf">fit</span><span class="p">().</span><span class="n">summary</span><span class="p">)</span></code></pre></figure> <div class="caption"> Sentiment Analysis Code Snippet </div> <h3 id="challenges">Challenges</h3> <p>The first challenge was that I only had the basic version of the Twitter API, which allowed me to only query for limited times. Even though I created 3 twitter accounts, which gave me about 5000 tweets each, it was still far from enough. I could have improved results just by increasing the sheer volume of tweets, but I needed to spend some of the tweet counts during the testing phases of the API pull, so I had fewer remaining tries left to allocate between the iPhones. I was not able to use advanced functions, such as filtering out retweets and some key words to weed out the fluff. A lot of the tweets were not useful. If I was given the premium or enterprise version of Twitter API, I would pull more tweets for each day for more days. I would use advanced filters to filter out key words such as giveaways or ads that were considered as junk. The model I came up with was only based on 6 observations because I only had pre and post release date observations for the tweets, which were aggregated to an average sentiment score for each phone. This could be greatly improved if given more data or taking a broader approach such as increasing the number of articles, increasing the number of tweets pulled, incorporating articles published year round to see if there was a seasonal trend in sentiment for different media outlets, expanding the product line I considered to include all the generations of iPhones to track changing sentiment over time and provide more observations, or even including multiple products lines, such as MacBooks and AirPods, and not just narrowing the scope to iPhones.</p> <p>The second challenge was that because of the nature of this project, I did a lot of textual analysis, but not much data analysis. The nature of the project was more descriptive than quantitative, and I had to use some descriptive context to support my theory that positive sentiment from consumers and marketing would reflect in positive or increased stock returns. I tried to incorporate some data analysis, but it was limited.</p> <h3 id="conclusion-and-recommendations">Conclusion and Recommendations</h3> <p>Consumer sentiment is a strong predictor of a company’s stock performance. For iPhones, consumers and news reporters were in general more positive than negative. iPhone 11 was not as successful as iPhone 8 and iPhone X based on the smaller increase in positive sentiment after its release relative to the other two models and based on the coefficients and p-values of the regression analysis. I also noticed that for the iPhone 11, there were considerably fewer articles published from my sources related to Apple and iPhone products in general in the two weeks leading up to the release than for the same time frame prior to the iPhone 8 and iPhone X releases. Along with the observations of the lower stock returns during the period for the iPhone 11, this seems to support that there was less success with the marketing strategy and less positive sentiment associated with the release of the iPhone 11, at least in news coverage. I recommend that Apple marketing strategy and media or brand management teams make an effort to stay more engaged with general consumers via social media platforms and through media coverage such as news publishers before and after each new iPhone release, especially with technology focused publishing because tech articles tend to mention leaks and new information regarding new features in a very positive sentiment. Continuous and consistent coverage will encourage consumers to actively talk about the products, keep topics trending, create more opportunities to develop positive sentiment, and ultimately lead to better stock performance.</p> </article> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Meng Xu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-5QW1MZ6BBM"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5QW1MZ6BBM");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>